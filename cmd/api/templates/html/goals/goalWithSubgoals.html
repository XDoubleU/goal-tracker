{{define "goalWithSubGoals"}}
    {{if .Goal.IsLinked}}
        <li><a href="/{{.Goal.ID}}">{{.Goal.Name}}</a> (<a href="/edit/{{.Goal.ID}}">edit</a>) (<a href="/unlink/{{.Goal.ID}}">unlink</a>)</li>
    {{else}}
        <li>{{.Goal.Name}} (<a href="/link/{{.Goal.ID}}">link</a>)</li>
    {{end}}

    {{if .HasSubgoals}}
        <ul>
            {{range $goalWithSubGoals := .Subgoals}}
                {{template "goalWithSubGoals" $goalWithSubGoals}}
            {{end}}
        </ul>
    {{end}}
{{end}}